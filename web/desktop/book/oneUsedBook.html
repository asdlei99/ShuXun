<!--一本二手书的信息:hbs-->
<!--@param:usedBookObjectId 二手书的AVOS id-->
<!--@param:role 二手书的角色是sell || need-->
<!--hbs:usedBook AvosUsedBook-->

<!DOCTYPE html>
<html lang="zh-CN" ng-app="APP">
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta charset="utf-8">
    <title>{{meta.title}}</title>
    <meta name="keywords" content="{{meta.keywords}}">
    <meta name="description" content="{{meta.description}}">
    <!-- build:Semantic-css -->
    <link href="../bower_components/semantic-ui/dist/semantic.css" rel="stylesheet">
    <!-- endbuild -->
</head>
<body class="ui horizontally padded grid" style="padding-top: 80px">

<ng-include src="'../temp/header.html'" d-include-replace></ng-include>

<!-- 主内容区-->
<main class="ui twelve wide column">
    <div class="ui page stackable grid">

        <!-- 书名-->
        <div class="sixteen wide column">
            <h2 class="ui header">
                {{usedBook.attributes.title}}
            </h2>
        </div>

        <!-- 图书信息-->
        <div class="two column row">

            <!-- 封面照片-->
            <div class="column">
                <img class="ui image" src="{{usedBook.attributes.info.attributes.bigImage}}">
            </div>

            <!-- 出版信息-->
            <div class="column">
                <div class="ui list">
                    <div class="item">
                        <div class="content">
                            <h5 class="header">作者</h5>

                            <div class="description">{{usedBook.attributes.info.attributes.author}}</div>
                        </div>
                    </div>
                    <div class="item">
                        <h5 class="header">出版社</h5>

                        <div class="description">{{usedBook.attributes.info.attributes.publisher}}</div>
                    </div>
                    <div class="item">
                        <h5 class="header">译者</h5>

                        <div class="description">{{usedBook.attributes.info.attributes.translator}}</div>
                    </div>
                    <div class="item">
                        <h5 class="header">出版时间</h5>

                        <div class="description">{{usedBook.attributes.info.attributes.pubdate}}</div>
                    </div>
                    <div class="item">
                        <h5 class="header">页数</h5>

                        <div class="description">{{usedBook.attributes.info.attributes.page}}</div>
                    </div>
                    <div class="item">
                        <h5 class="header">定价</h5>

                        <div class="description">{{usedBook.attributes.info.attributes.price}}</div>
                    </div>
                    <div class="item">
                        <h5 class="header">装帧</h5>

                        <div class="description">{{usedBook.attributes.info.attributes.binding}}</div>
                    </div>
                    <div class="item">
                        <h5 class="header">ISBN</h5>

                        <div class="description">{{usedBook.attributes.info.attributes.isbn13}}</div>
                    </div>
                    {{#if bookInfo.attributes.info.attributes.rating}}
                    <div class="item">
                        <h5 class="header">豆瓣书评</h5>

                        <div class="description">
                            <a><em>{{bookInfo.attributes.info.attributes.rating.average}}</em>分
                                <em>{{bookInfo.attributes.info.attributes.rating.numRaters}}</em>人参与</a>

                            <div class="ui star rating"
                                 data-rating="{{bookInfo.attributes.info.attributes.rating.average}}"
                                 data-max-rating="10"></div>

                        </div>
                    </div>
                    {{/if}}
                </div>
            </div>

        </div>

        <!-- 二手书信息-->
        <div class="sixteen wide column">
            <div class="ui large horizontal divided list">
                <div class="item">
                    <div class="content">
                        <h5 class="header">要价</h5>

                        <p class="sub header">
                            {{usedBook.attributes.price}}<i class="icon yen"></i>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <div class="content">
                        <h5 class="header">上传时间</h5>

                        <p class="sub header">
                            {{dateFormat usedBook.updatedAt}}
                        </p>
                    </div>
                </div>
                <div class="item">
                    <div class="content">
                        <h5 class="header">主人描述</h5>

                        <p class="sub header">
                            {{usedBook.attributes.des}}
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 评论列表-->
        <d-used-book-comments class="ui sixteen wide column"
                              used-book-object-id="'{{usedBook.id}}'"
                              owner-object-id="'{{usedBook.attributes.owner.id}}'"></d-used-book-comments>
    </div>
</main>

<!-- 辅助内容区-->
<aside class="ui four wide computer only column">
    <d-one-used-book-aside-info class="ui grid" used-book-object-id="'{{usedBook.id}}'"></d-one-used-book-aside-info>
</aside>

<ng-include src="'../temp/footer.html'" d-include-replace></ng-include>

<!-- build:jQuery-js -->
<script src="../bower_components/jquery/dist/jquery.js"></script>
<!-- endbuild -->
<!-- build:Semantic-js -->
<script src="../bower_components/semantic-ui/dist/semantic.js"></script>
<!-- endbuild -->
<!-- build:Angular-js -->
<script src="../bower_components/angular/angular.js"></script>
<!-- endbuild -->
<!-- build:Avos-js -->
<script src="../../../bower_components/avoscloud-sdk/dist/av-core.js"></script>
<!-- endbuild -->
<!-- build:LeanAnalytics-js -->
<script src="../../../bower_components/leancloud-analytics/src/AV.analytics.js"></script>
<!-- endbuild -->
<!-- build:Main-js -->
<script src="../../js/util.js"></script>
<script src="../../js/Model.js"></script>
<script src="../../js/Analytics.js"></script>
<script src="../js/app.js"></script>
<!--Service-->
<script src="../../js/service/BookRecommend.js"></script>
<script src="../../js/service/BusinessSite.js"></script>
<script src="../../js/service/DoubanBook.js"></script>
<script src="../../js/service/InfoService.js"></script>
<script src="../../js/service/BookInfo.js"></script>
<script src="../../js/service/SearchBook.js"></script>
<script src="../../js/service/Status.js"></script>
<script src="../../js/service/UsedBook.js"></script>
<script src="../../js/service/User.js"></script>
<script src="../../js/service/WeChatJS.js"></script>
<!--Controller-->
<script src="../js/controller/d_partial_NearUser.js"></script>
<script src="../js/controller/d_topBar.js"></script>
<!--Directive-->
<script src="../js/directive/dUserInfo.js"></script>
<script src="../js/directive/dIncludeReplace.js"></script>
<script src="../js/directive/dUsedBookComments.js"></script>
<script src="../js/directive/dOneUsedBookAsideInfo.js"></script>
<!-- endbuild -->
<script>
    //统计用户行为
    (function () {
        var usedBookObjectId = getQueryParameterByName('usedBookObjectId');
        var analyticsSugue = leanAnalytics.browseUsedBook(usedBookObjectId);
        window.onbeforeunload = function () {
            analyticsSugue.send();
        }
    })();
</script>
</body>
</html>