<div class="row" ng-controller="bs_book_recommendCtrl">
    <div class="col-md-9">

        <div class="row">
            <div class=col-md-6>
                <ol class="breadcrumb">
                    <li class="active">图书主页</li>
                </ol>
            </div>
            <div class="col-md-6">
                <div class="btn-group pull-right">
                    <button type="button" class="btn btn-default btn-info"
                            ng-click="chooseMajor()">去其他专业看看
                    </button>
                </div>
            </div>
        </div>

        <!-- 新书速递-->
        <div class="row" ng-if="LatestBook.books.length>0">
            <div class="col-md-12">
                <h4><a ui-sref="book_bookList({cmd:'latest'})">新书速递</a></h4>
                <hr>
            </div>
            <div class="col-md-3" ng-repeat="bookInfo in LatestBook.books.slice(0,8)">
                <bs-one-book-info book-info="bookInfo"
                                  should-show-used-books-count="true"></bs-one-book-info>
            </div>
        </div>

        <!-- 附近用户上传的旧书-->
        <div class="row" ng-if="BookRecommend$.NearUsedBook.usedBooks.length>0">
            <div class="col-md-12">
                <h4><a ui-sref="book_usedBookList({cmd:'nearUsed'})">附近旧书</a></h4>
                <hr>
            </div>
            <div class="col-md-3" ng-repeat="usedBook in BookRecommend$.NearUsedBook.usedBooks.slice(0,8)">
                <bs-one-used-book used-book="usedBook"
                        ></bs-one-used-book>
            </div>
        </div>

        <!-- 用户附近的用户-->
        <div class="row" ng-if="BookRecommend$.NearUser.users.length>0">
            <div class="col-md-12">
                <h4><a>附近同学</a></h4>
                <hr>
            </div>
            <div class="col-xs-6 col-md-2" ng-repeat="user in BookRecommend$.NearUser.users.slice(0,24)">
                <bs-one-user user="user"
                             image-size="132"
                             margin="20"
                             avatar-size="66"></bs-one-user>
            </div>
        </div>

        <!-- 附近用户发布的求书-->
        <div class="row" ng-if="BookRecommend$.NearNeedBook.needBooks.length>0">
            <div class="col-md-12">
                <h4><a ui-sref="book_usedBookList({cmd:'nearNeed'})">附近求书</a></h4>
                <hr>
            </div>
            <div class="col-md-3" ng-repeat="needBook in BookRecommend$.NearNeedBook.needBooks.slice(0,8)">
                <bs-one-need-book need-book="needBook"
                        ></bs-one-need-book>
            </div>
        </div>

        <!-- 根据专业推荐的书-->
        <div class="row" ng-if="BookRecommend$.TagBook.books.length>0">
            <div class="col-md-12">
                <h4><a ui-sref="book_bookList({cmd:'tag',tag:major})">专业推荐读物</a></h4>
                <hr>
            </div>
            <div class="col-md-3" ng-repeat="bookInfo in BookRecommend$.TagBook.books.slice(0,8)">
                <bs-one-book-info book-info="bookInfo"
                                  should-show-used-books-count="true"
                        ></bs-one-book-info>
            </div>
        </div>

    </div>

    <aside class="col-md-3 hidden-sm hidden-xs">
        <h4>图书分类</h4>
        <hr>
        <tabset type="tabs">
            <tab ng-repeat="bigTag in BookRecommend$.BookTag.getTagAttrNames()" heading="{{bigTag}}">
                <a class="btn btn-link btn-sm" style="margin: 5px"
                   ng-repeat="littleTag in BookRecommend$.BookTag.tag[bigTag]"
                   ng-bind="littleTag"
                   ui-sref="book_bookList({cmd:'tag',tag:littleTag})"></a>
            </tab>
        </tabset>
    </aside>
</div>
